{% extends 'admin/admin_layout.html' %}
{% load static %}
{% block content %}
<div class="content-wrapper">
    <div class="page-header">
      <h3 class="page-title">
        <span class="page-title-icon bg-gradient-primary text-white me-2">
          <i class="mdi mdi-home"></i>
        </span> Dashboard
      </h3>
      <nav aria-label="breadcrumb">
        <ul class="breadcrumb">
          <li class="breadcrumb-item active" aria-current="page">
            <span></span>Overview <i class="mdi mdi-alert-circle-outline icon-sm text-primary align-middle"></i>
          </li>
        </ul>
      </nav>
    </div>

    <div class="row">
      <div class="col-md-8.5 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <div class="clearfix">
              <h4 class="card-title float-start">View Employee</h4>
              <div id="visit-sale-chart-legend" class="rounded-legend legend-horizontal legend-top-right float-end"></div>
            </div>

            <table class="table" ui-jq="footable" ui-options='{
              "paging": {
                "enabled": true
              },
              "filtering": {
                "enabled": true
              },
              "sorting": {
                "enabled": true
              }}'>
              <tr>
                  <th>Name</th>
                  <th>Address</th>
                  <th>Phone Number</th>
                  <th>Email</th>
                  <th>Gender</th>
                  <th>Actions</th>
              </tr>
              {% for e in elist %}
              <tr>
                <td>{{e.name}}</td>
                <td>{{e.address}}</td>
                <td>{{e.phone_num}}</td>
                <td>{{e.email}}</td>
                <td>{{e.gender}}</td>
                <td>
                    <a href="{% url 'employee_edit_data' e.emp_id  %}" class="btn btn-warning">Edit</a>
                    <a href="{% url 'employee_delete_data' e.emp_id  %}" class="btn btn-danger">Delete</a>
                </td>
              </tr>
              {% endfor %}
            </table>
          </div>
        </div>
      </div>

      <div class="col-md-3.5 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <div class="clearfix">
              <h4 class="card-title float-start">Add Employee</h4>
              <div id="visit-sale-chart-legend" class="rounded-legend legend-horizontal legend-top-right float-end"></div>
            </div>
            <form action="{% url 'employee_save_data' %}" method="post">
             {% csrf_token %}
             
             <!-- Name field with validation -->
            <div class="form-group">
              <label>Name</label>
              <input type="text" name="zname" required class="form-control" placeholder="Enter name">
            </div>

            <!-- Address field with validation -->
            <div class="form-group">
              <label>Address</label>
              <input type="text" name="zaddress" required class="form-control" placeholder="Enter address">
            </div>

            <!-- Phone Number field with validation (10 digits) -->
            <div class="form-group">
              <label>Phone Number</label>
              <input type="text" name="zphone" required class="form-control" placeholder="Enter phone number" 
                     pattern="^\d{10}$" title="Phone number must be exactly 10 digits">
            </div>

            <!-- Email field with validation -->
            <div class="form-group">
              <label>Email</label>
              <input type="email" name="zemail" required class="form-control" placeholder="Enter email"
                     pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" 
                     title="Please enter a valid email address (e.g., example@domain.com)">
            </div>

            <!-- Gender radio button with validation -->
            <div class="form-group">
              <label>Gender</label>
              <div>
                <input type="radio" name="zgender" value="male" required> Male
                <input type="radio" name="zgender" value="female" required> Female
              </div>
            </div>

            <!-- Password field with validation -->
            <div class="form-group">
              <label>Password</label>
              <input type="password" name="zpassword" required class="form-control" placeholder="Enter password" 
                     minlength="8" 
                     pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[!@#$%^&*]).{8,}$" 
                     title="Password must be at least 8 characters long, contain at least one letter, one number, and one special character (!@#$%^&*)">
            </div>

            <input type="submit" value="Save" class="btn btn-success">
            <input type="button" value="Cancel" class="btn btn-danger"> 

          </form>
          </div>
        </div>
      </div>
    </div>
</div>
{% endblock %}
